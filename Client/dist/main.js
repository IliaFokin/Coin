(()=>{var t={537:function(t){"undefined"!=typeof self&&self,t.exports=function(){"use strict";var t={407:function(t,e,n){n.d(e,{default:function(){return T}});var r=/([:*])(\w+)/g,o=/\*/g,i=/\/\?/g;function a(t){return void 0===t&&(t="/"),v()?location.pathname+location.search+location.hash:t}function s(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function u(t){return"string"==typeof t}function c(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}function l(t){var e=s(t).split(/\?(.*)?$/);return[s(e[0]),e.slice(1).join("")]}function d(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");if(""!==o[0]){var i=decodeURIComponent(o[0]);e[i]?(Array.isArray(e[i])||(e[i]=[e[i]]),e[i].push(decodeURIComponent(o[1]||""))):e[i]=decodeURIComponent(o[1]||"")}}return e}function h(t,e){var n,a=l(s(t.currentLocationPath)),h=a[0],f=a[1],p=""===f?null:d(f),v=[];if(u(e.path)){if(n="(?:/^|^)"+s(e.path).replace(r,(function(t,e,n){return v.push(n),"([^/]+)"})).replace(o,"?(?:.*)").replace(i,"/?([^/]+|)")+"$",""===s(e.path)&&""===s(h))return{url:h,queryString:f,hashString:c(t.to),route:e,data:null,params:p}}else n=e.path;var _=new RegExp(n,""),y=h.match(_);if(y){var m=u(e.path)?function(t,e){return 0===e.length?null:t?t.slice(1,t.length).reduce((function(t,n,r){return null===t&&(t={}),t[e[r]]=decodeURIComponent(n),t}),null):null}(y,v):y.groups?y.groups:y.slice(1);return{url:s(h.replace(new RegExp("^"+t.instance.root),"")),queryString:f,hashString:c(t.to),route:e,data:m,params:p}}return!1}function f(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function p(t,e){return void 0===t[e]||!0===t[e]}function v(){return"undefined"!=typeof window}function _(t,e){return void 0===t&&(t=[]),void 0===e&&(e={}),t.filter((function(t){return t})).forEach((function(t){["before","after","already","leave"].forEach((function(n){t[n]&&(e[n]||(e[n]=[]),e[n].push(t[n]))}))})),e}function y(t,e,n){var r=e||{},o=0;!function e(){t[o]?Array.isArray(t[o])?(t.splice.apply(t,[o,1].concat(t[o][0](r)?t[o][1]:t[o][2])),e()):t[o](r,(function(t){void 0===t||!0===t?(o+=1,e()):n&&n(r)})):n&&n(r)}()}function m(t,e){void 0===t.currentLocationPath&&(t.currentLocationPath=t.to=a(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),e()}function g(t,e){for(var n=0;n<t.instance.routes.length;n++){var r=h(t,t.instance.routes[n]);if(r&&(t.matches||(t.matches=[]),t.matches.push(r),"ONE"===t.resolveOptions.strategy))return void e()}e()}function w(t,e){t.navigateOptions&&(void 0!==t.navigateOptions.shouldResolve&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),void 0!==t.navigateOptions.silent&&console.warn('"silent" is deprecated. Please check the documentation.')),e()}function b(t,e){!0===t.navigateOptions.force?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),e(!1)):e()}y.if=function(t,e,n){return Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),[t,e,n]};var x=v(),F=f();function k(t,e){if(p(t.navigateOptions,"updateBrowserURL")){var n=("/"+t.to).replace(/\/\//g,"/"),r=x&&t.resolveOptions&&!0===t.resolveOptions.hash;F?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",r?"#"+n:n),location&&location.hash&&(t.instance.__freezeListening=!0,setTimeout((function(){if(!r){var e=location.hash;location.hash="",location.hash=e}t.instance.__freezeListening=!1}),1))):x&&(window.location.href=t.to)}e()}function C(t,e){var n=t.instance;n.lastResolved()?y(n.lastResolved().map((function(e){return function(n,r){if(e.route.hooks&&e.route.hooks.leave){var o,i=t.instance.matchLocation(e.route.path,t.currentLocationPath,!1);o="*"!==e.route.path?!i:!(t.matches&&t.matches.find((function(t){return e.route.path===t.route.path}))),p(t.navigateOptions,"callHooks")&&o?y(e.route.hooks.leave.map((function(e){return function(n,r){return e((function(e){!1===e?t.instance.__markAsClean(t):r()}),t.matches&&t.matches.length>0?1===t.matches.length?t.matches[0]:t.matches:void 0)}})).concat([function(){return r()}])):r()}else r()}})),{},(function(){return e()})):e()}function E(t,e){p(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),e()}var L=[function(t,e){var n=t.instance.lastResolved();if(n&&n[0]&&n[0].route===t.match.route&&n[0].url===t.match.url&&n[0].queryString===t.match.queryString)return n.forEach((function(e){e.route.hooks&&e.route.hooks.already&&p(t.navigateOptions,"callHooks")&&e.route.hooks.already.forEach((function(e){return e(t.match)}))})),void e(!1);e()},function(t,e){t.match.route.hooks&&t.match.route.hooks.before&&p(t.navigateOptions,"callHooks")?y(t.match.route.hooks.before.map((function(e){return function(n,r){return e((function(e){!1===e?t.instance.__markAsClean(t):r()}),t.match)}})).concat([function(){return e()}])):e()},function(t,e){p(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),e()},function(t,e){t.match.route.hooks&&t.match.route.hooks.after&&p(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach((function(e){return e(t.match)})),e()}],A=[C,function(t,e){var n=t.instance._notFoundRoute;if(n){t.notFoundHandled=!0;var r=l(t.currentLocationPath),o=r[0],i=r[1],a=c(t.to);n.path=s(o);var u={url:n.path,queryString:i,hashString:a,data:null,route:n,params:""!==i?d(i):null};t.matches=[u],t.match=u}e()},y.if((function(t){return t.notFoundHandled}),L.concat([E]),[function(t,e){t.resolveOptions&&!1!==t.resolveOptions.noMatchWarning&&void 0!==t.resolveOptions.noMatchWarning||console.warn('Navigo: "'+t.currentLocationPath+"\" didn't match any of the registered routes."),e()},function(t,e){t.instance._setCurrent(null),e()}])];function S(){return(S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function O(t,e){var n=0;C(t,(function r(){n!==t.matches.length?y(L,S({},t,{match:t.matches[n]}),(function(){n+=1,r()})):E(t,e)}))}function z(t){t.instance.__markAsClean(t)}function D(){return(D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var I="[data-navigo]";function T(t,e){var n,r=e||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:I},o=this,i="/",p=null,x=[],F=!1,C=f(),E=v();function L(t){return t.indexOf("#")>=0&&(t=!0===r.hash?t.split("#")[1]||"/":t.split("#")[0]),t}function S(t){return s(i+"/"+s(t))}function T(t,e,n,r){return t=u(t)?S(t):t,{name:r||s(String(t)),path:t,handler:e,hooks:_(n)}}function M(t,e){if(!o.__dirty){o.__dirty=!0,t=t?s(i)+"/"+s(t):void 0;var n={instance:o,to:t,currentLocationPath:t,navigateOptions:{},resolveOptions:D({},r,e)};return y([m,g,y.if((function(t){var e=t.matches;return e&&e.length>0}),O,A)],n,z),!!n.matches&&n.matches}o.__waiting.push((function(){return o.resolve(t,e)}))}function j(t,e){if(o.__dirty)o.__waiting.push((function(){return o.navigate(t,e)}));else{o.__dirty=!0,t=s(i)+"/"+s(t);var n={instance:o,to:t,navigateOptions:e||{},resolveOptions:e&&e.resolveOptions?e.resolveOptions:r,currentLocationPath:L(t)};y([w,b,g,y.if((function(t){var e=t.matches;return e&&e.length>0}),O,A),k,z],n,z)}}function P(){if(E)return(E?[].slice.call(document.querySelectorAll(r.linksSelector||I)):[]).forEach((function(t){"false"!==t.getAttribute("data-navigo")&&"_blank"!==t.getAttribute("target")?t.hasListenerAttached||(t.hasListenerAttached=!0,t.navigoHandler=function(e){if((e.ctrlKey||e.metaKey)&&"a"===e.target.tagName.toLowerCase())return!1;var n=t.getAttribute("href");if(null==n)return!1;if(n.match(/^(http|https)/)&&"undefined"!=typeof URL)try{var r=new URL(n);n=r.pathname+r.search}catch(t){}var i=function(t){if(!t)return{};var e,n=t.split(","),r={};return n.forEach((function(t){var n=t.split(":").map((function(t){return t.replace(/(^ +| +$)/g,"")}));switch(n[0]){case"historyAPIMethod":r.historyAPIMethod=n[1];break;case"resolveOptionsStrategy":e||(e={}),e.strategy=n[1];break;case"resolveOptionsHash":e||(e={}),e.hash="true"===n[1];break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":r[n[0]]="true"===n[1]}})),e&&(r.resolveOptions=e),r}(t.getAttribute("data-navigo-options"));F||(e.preventDefault(),e.stopPropagation(),o.navigate(s(n),i))},t.addEventListener("click",t.navigoHandler)):t.hasListenerAttached&&t.removeEventListener("click",t.navigoHandler)})),o}function V(t,e,n){var r=x.find((function(e){return e.name===t})),o=null;if(r){if(o=r.path,e)for(var a in e)o=o.replace(":"+a,e[a]);o=o.match(/^\//)?o:"/"+o}return o&&n&&!n.includeRoot&&(o=o.replace(new RegExp("^/"+i),"")),o}function $(t){var e=l(s(t)),r=e[0],o=e[1],i=""===o?null:d(o);return{url:r,queryString:o,hashString:c(t),route:T(r,(function(){}),[n],r),data:null,params:i}}function N(t,e,n){return"string"==typeof e&&(e=B(e)),e?(e.hooks[t]||(e.hooks[t]=[]),e.hooks[t].push(n),function(){e.hooks[t]=e.hooks[t].filter((function(t){return t!==n}))}):(console.warn("Route doesn't exists: "+e),function(){})}function B(t){return"string"==typeof t?x.find((function(e){return e.name===S(t)})):x.find((function(e){return e.handler===t}))}t?i=s(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.'),this.root=i,this.routes=x,this.destroyed=F,this.current=p,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.__markAsClean=function(t){t.instance.__dirty=!1,t.instance.__waiting.length>0&&t.instance.__waiting.shift()()},this.on=function(t,e,r){var o=this;return"object"!=typeof t||t instanceof RegExp?("function"==typeof t&&(r=e,e=t,t=i),x.push(T(t,e,[n,r])),this):(Object.keys(t).forEach((function(e){if("function"==typeof t[e])o.on(e,t[e]);else{var r=t[e],i=r.uses,a=r.as,s=r.hooks;x.push(T(e,i,[n,s],a))}})),this)},this.off=function(t){return this.routes=x=x.filter((function(e){return u(t)?s(e.path)!==s(t):"function"==typeof t?t!==e.handler:String(e.path)!==String(t)})),this},this.resolve=M,this.navigate=j,this.navigateByName=function(t,e,n){var r=V(t,e);return null!==r&&(j(r.replace(new RegExp("^/?"+i),""),n),!0)},this.destroy=function(){this.routes=x=[],C&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=F=!0},this.notFound=function(t,e){return o._notFoundRoute=T("*",t,[n,e],"__NOT_FOUND__"),this},this.updatePageLinks=P,this.link=function(t){return"/"+i+"/"+s(t)},this.hooks=function(t){return n=t,this},this.extractGETParameters=function(t){return l(L(t))},this.lastResolved=function(){return p},this.generate=V,this.getLinkPath=function(t){return t.getAttribute("href")},this.match=function(t){var e={instance:o,currentLocationPath:t,to:t,navigateOptions:{},resolveOptions:r};return g(e,(function(){})),!!e.matches&&e.matches},this.matchLocation=function(t,e,n){void 0===e||void 0!==n&&!n||(e=S(e));var r={instance:o,to:e,currentLocationPath:e};return m(r,(function(){})),"string"==typeof t&&(t=void 0===n||n?S(t):t),h(r,{name:String(t),path:t,handler:function(){},hooks:{}})||!1},this.getCurrentLocation=function(){return $(s(a(i)).replace(new RegExp("^"+i),""))},this.addBeforeHook=N.bind(this,"before"),this.addAfterHook=N.bind(this,"after"),this.addAlreadyHook=N.bind(this,"already"),this.addLeaveHook=N.bind(this,"leave"),this.getRoute=B,this._pathToMatchObject=$,this._clean=s,this._checkForAHash=L,this._setCurrent=function(t){return p=o.current=t},function(){C&&(this.__popstateListener=function(){o.__freezeListening||M()},window.addEventListener("popstate",this.__popstateListener))}.call(this),P.call(this)}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(407)}().default}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};(()=>{"use strict";function t(t,e){var n=function(t){for(var e=t.split(/([.#])/),n="",r="",o=1;o<e.length;o+=2)switch(e[o]){case".":n+=" "+e[o+1];break;case"#":r=e[o+1]}return{className:n.trim(),tag:e[0]||"div",id:r}}(t),r=n.tag,o=n.id,i=n.className,a=e?document.createElementNS(e,r):document.createElement(r);return o&&(a.id=o),i&&(e?a.setAttribute("class",i):a.className=i),a}function e(t,e){var n=m(t),r=m(e);return e===r&&r.__redom_view&&(e=r.__redom_view),r.parentNode&&(o(0,r,n),n.removeChild(r)),e}function o(t,e,n){var r=e.__redom_lifecycle;if(i(r))e.__redom_lifecycle={};else{var o=n;for(e.__redom_mounted&&c(e,"onunmount");o;){var a=o.__redom_lifecycle||{};for(var s in r)a[s]&&(a[s]-=r[s]);i(a)&&(o.__redom_lifecycle=null),o=o.parentNode}}}function i(t){if(null==t)return!0;for(var e in t)if(t[e])return!1;return!0}n.d(r,{N:()=>jt});var a=["onmount","onremount","onunmount"],s="undefined"!=typeof window&&"ShadowRoot"in window;function u(t,e,n,r){var i=m(t),u=m(e);e===u&&u.__redom_view&&(e=u.__redom_view),e!==u&&(u.__redom_view=e);var l=u.__redom_mounted,d=u.parentNode;if(l&&d!==i&&o(0,u,d),null!=n)if(r){var h=m(n);h.__redom_mounted&&c(h,"onunmount"),i.replaceChild(u,h)}else i.insertBefore(u,m(n));else i.appendChild(u);return function(t,e,n,r){for(var o=e.__redom_lifecycle||(e.__redom_lifecycle={}),i=n===r,u=!1,l=0,d=a;l<d.length;l+=1){var h=d[l];i||t!==e&&h in t&&(o[h]=(o[h]||0)+1),o[h]&&(u=!0)}if(u){var f=n,p=!1;for((i||f&&f.__redom_mounted)&&(c(e,i?"onremount":"onmount"),p=!0);f;){var v=f.parentNode,_=f.__redom_lifecycle||(f.__redom_lifecycle={});for(var y in o)_[y]=(_[y]||0)+o[y];if(p)break;(f.nodeType===Node.DOCUMENT_NODE||s&&f instanceof ShadowRoot||v&&v.__redom_mounted)&&(c(f,i?"onremount":"onmount"),p=!0),f=v}}else e.__redom_lifecycle={}}(e,u,i,d),e}function c(t,e){"onmount"===e||"onremount"===e?t.__redom_mounted=!0:"onunmount"===e&&(t.__redom_mounted=!1);var n=t.__redom_lifecycle;if(n){var r=t.__redom_view,o=0;for(var i in r&&r[e]&&r[e](),n)i&&o++;if(o)for(var a=t.firstChild;a;){var s=a.nextSibling;c(a,e),a=s}}}function l(t,e,n){t.style[e]=null==n?"":n}var d="http://www.w3.org/1999/xlink";function h(t,e,n,r){var o=m(t);if("object"==typeof e)for(var i in e)h(o,i,e[i],r);else{var a=o instanceof SVGElement,s="function"==typeof n;if("style"===e&&"object"==typeof n)!function(t,e,n){var r=m(t);if("object"==typeof e)for(var o in e)l(r,o,e[o]);else l(r,e,void 0)}(o,n);else if(a&&s)o[e]=n;else if("dataset"===e)p(o,n);else if(a||!(e in o)&&!s||"list"===e){if(a&&"xlink"===e)return void f(o,n);r&&"class"===e&&(n=o.className+" "+n),null==n?o.removeAttribute(e):o.setAttribute(e,n)}else o[e]=n}}function f(t,e,n){if("object"==typeof e)for(var r in e)f(t,r,e[r]);else null!=n?t.setAttributeNS(d,e,n):t.removeAttributeNS(d,e,n)}function p(t,e,n){if("object"==typeof e)for(var r in e)p(t,r,e[r]);else null!=n?t.dataset[e]=n:delete t.dataset[e]}function v(t){return document.createTextNode(null!=t?t:"")}function _(t,e,n){for(var r=0,o=e;r<o.length;r+=1){var i=o[r];if(0===i||i){var a=typeof i;"function"===a?i(t):"string"===a||"number"===a?t.appendChild(v(i)):g(m(i))?u(t,i):i.length?_(t,i,n):"object"===a&&h(t,i,null,n)}}}function y(t){return"string"==typeof t?w(t):m(t)}function m(t){return t.nodeType&&t||!t.el&&t||m(t.el)}function g(t){return t&&t.nodeType}function w(e){for(var n,r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];var i=typeof e;if("string"===i)n=t(e);else{if("function"!==i)throw new Error("At least one argument required");var a=e;n=new(Function.prototype.bind.apply(a,[null].concat(r)))}return _(m(n),r,!0),n}var b=w;function x(t){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];for(var o=F(t,n,m(t).firstChild);o;){var i=o.nextSibling;e(t,o),o=i}}function F(t,e,n){for(var r=n,o=Array(e.length),i=0;i<e.length;i++)o[i]=e[i]&&m(e[i]);for(var a=0;a<e.length;a++){var s=e[a];if(s){var c=o[a];if(c!==r)if(g(c)){var l=r&&r.nextSibling,d=null!=s.__redom_index&&l===o[a+1];u(t,s,r,d),d&&(r=l)}else null!=s.length&&(r=F(t,s,r));else r=r.nextSibling}}return r}w.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return w.bind.apply(w,[this].concat(t))};var k=function(t,e,n){this.View=t,this.initData=n,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=e&&(this.key="function"==typeof e?e:function(t){return function(e){return e[t]}}(e))};k.prototype.update=function(t,e){for(var n=this,r=n.View,o=n.key,i=n.initData,a=null!=o,s=this.lookup,u={},c=Array(t.length),l=this.views,d=0;d<t.length;d++){var h=t[d],f=void 0;if(a){var p=o(h);f=s[p]||new r(i,h,d,t),u[p]=f,f.__redom_id=p}else f=l[d]||new r(i,h,d,t);f.update&&f.update(h,d,t,e),m(f.el).__redom_view=f,c[d]=f}this.oldViews=l,this.views=c,this.oldLookup=s,this.lookup=u};var C=function(t,e,n,r){this.View=e,this.initData=r,this.views=[],this.pool=new k(e,n,r),this.el=y(t),this.keySet=null!=n};C.prototype.update=function(t,n){void 0===t&&(t=[]);var r=this.keySet,o=this.views;this.pool.update(t,n);var i=this.pool,a=i.views,s=i.lookup;if(r)for(var u=0;u<o.length;u++){var c=o[u];null==s[c.__redom_id]&&(c.__redom_index=null,e(this,c))}for(var l=0;l<a.length;l++)a[l].__redom_index=l;x(this,a),r&&(this.lookup=s),this.views=a},C.extend=function(t,e,n,r){return C.bind(C,t,e,n,r)};var E="http://www.w3.org/2000/svg";function L(e){for(var n,r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];var i=typeof e;if("string"===i)n=t(e,E);else{if("function"!==i)throw new Error("At least one argument required");var a=e;n=new(Function.prototype.bind.apply(a,[null].concat(r)))}return _(m(n),r,!0),n}L.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return L.bind.apply(L,[this].concat(t))},L.ns=E;var A=n(537),S=n.n(A);const O=b("button.nav__btn","Банкоматы"),z=b("button.nav__btn","Счета"),D=b("button.nav__btn","Валюта"),I=b("button.nav__btn","Выйти"),T=b("header.header",[b(".container",[b(".header__wrapper",[b("h1.header__title","Coin."),b("nav.header__nav",[O,z,D,I])])])]),M=b("input.login__input#login-input",{type:"text",placeholder:" "}),j=b("label.login__error","Неверный логин"),P=b("input.login__input#password-input",{type:"password",placeholder:" "}),V=b("label.password__error","Неправильный пароль"),$=b(".error__message"),N=b("form.login",[b("h2.login__title","Вход в аккаунт"),$,b(".login__input-wrapper",[M,b("label.login__placeholder","Логин"),j]),b(".login__input-wrapper",[P,b("label.login__placeholder","Пароль"),V]),b("button.login__btn","Войти")]);async function B(t){return await fetch("http://localhost:3000/accounts",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Basic ${t}`}}).then((t=>t.json()))}async function R(t,e){return await fetch(`http://localhost:3000/account/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Basic ${e}`}}).then((t=>t.json()))}function H(t){const e=t.split("T")[0].split("-");return`${e[2]} ${["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][e[1]-1]} ${e[0]}`}const q=b("button.btn.accounts__btn","Создать новый счет");function J(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=b("li.dropdown__item","По номеру"),r=b("li.dropdown__item","По балансу"),o=b("li.dropdown__item","По последней транзакции"),i=b("ul.accounts__dropdown",[n,r,o]),a=b(".accounts__sort");"account"===e?(n.classList.add("dropdown__item--checked"),a.textContent=n.textContent):"balance"===e?(r.classList.add("dropdown__item--checked"),a.textContent=r.textContent):"lastTransaction"===e?(o.classList.add("dropdown__item--checked"),a.textContent=o.textContent):a.textContent="Сортировка",a.addEventListener("click",(()=>{a.classList.toggle("accounts__sort--active")})),n.addEventListener("click",(()=>{jt.navigate("/accounts/sort/account")})),r.addEventListener("click",(()=>{jt.navigate("/accounts/sort/balance")})),o.addEventListener("click",(()=>{jt.navigate("/accounts/sort/lastTransaction")}));const s=b("ul.accounts__list"),u=b(".container",[b(".accounts",[b(".accounts__top",[b(".accounts__menu",[b("h2.section__title","Ваши счета"),b(".accounts__sort-wrapper",[a,i])]),q]),s])]);return t.forEach((t=>{const e=b("li.accounts__item",[b(".item__info",[b(".item__account",t.account),b(".item__sum",`${t.balance} ₽`)]),b(".item__actions",[b(".item__transaction",`Последняя транзакция: ${t.transactions.length?H(t.transactions[0].date):"-"}`),b("a.btn",{href:`accounts/${t.account}`,onclick(t){t.preventDefault(),jt.navigate(t.target.getAttribute("href"))}},"Открыть")])]);s.append(e)})),u}const W=b("ul.currency__list.currency__feed");(async()=>{(await async function(){return new WebSocket("ws://localhost:3000/currency-feed")}()).addEventListener("message",(t=>{const e=b(".currency__amount",`${JSON.parse(t.data).rate}`);1===JSON.parse(t.data).change?e.classList.add("currency__amount--up"):e.classList.add("currency__amount--down");const n=b("li.currency__item",[b(".currency__code",`${JSON.parse(t.data).from}/${JSON.parse(t.data).to}`),b(".currency__border"),e]);W.prepend(n)}))})();var U=function(){return U=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},U.apply(this,arguments)};function G(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var K,Y="KEYS",X="VALUES",Z="",tt=function(){function t(t,e){var n=t._tree,r=Array.from(n.keys());this.set=t,this._type=e,this._path=r.length>0?[{node:n,keys:r}]:[]}return t.prototype.next=function(){var t=this.dive();return this.backtrack(),t},t.prototype.dive=function(){if(0===this._path.length)return{done:!0,value:void 0};var t=et(this._path),e=t.node,n=t.keys;if(et(n)===Z)return{done:!1,value:this.result()};var r=e.get(et(n));return this._path.push({node:r,keys:Array.from(r.keys())}),this.dive()},t.prototype.backtrack=function(){if(0!==this._path.length){var t=et(this._path).keys;t.pop(),t.length>0||(this._path.pop(),this.backtrack())}},t.prototype.key=function(){return this.set._prefix+this._path.map((function(t){var e=t.keys;return et(e)})).filter((function(t){return t!==Z})).join("")},t.prototype.value=function(){return et(this._path).node.get(Z)},t.prototype.result=function(){switch(this._type){case X:return this.value();case Y:return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t}(),et=function(t){return t[t.length-1]},nt=function(t,e,n,r,o,i,a,s){var u,c,l=i*a;try{t:for(var d=G(t.keys()),h=d.next();!h.done;h=d.next()){var f=h.value;if(f===Z){var p=o[l-1];p<=n&&r.set(s,[t.get(f),p])}else{for(var v=i,_=0;_<f.length;++_,++v){for(var y=f[_],m=a*v,g=m-a,w=o[m],b=Math.max(0,v-n-1),x=Math.min(a-1,v+n),F=b;F<x;++F){var k=y!==e[F],C=o[g+F]+ +k,E=o[g+F+1]+1,L=o[m+F]+1,A=o[m+F+1]=Math.min(C,E,L);A<w&&(w=A)}if(w>n)continue t}nt(t.get(f),e,n,r,o,v,a,s+f)}}}catch(t){u={error:t}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}},rt=function(){function t(t,e){void 0===t&&(t=new Map),void 0===e&&(e=""),this._size=void 0,this._tree=t,this._prefix=e}return t.prototype.atPrefix=function(e){var n,r;if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");var o=Q(ot(this._tree,e.slice(this._prefix.length)),2),i=o[0],a=o[1];if(void 0===i){var s=Q(lt(a),2),u=s[0],c=s[1];try{for(var l=G(u.keys()),d=l.next();!d.done;d=l.next()){var h=d.value;if(h!==Z&&h.startsWith(c)){var f=new Map;return f.set(h.slice(c.length),u.get(h)),new t(f,e)}}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}return new t(i,e)},t.prototype.clear=function(){this._size=void 0,this._tree.clear()},t.prototype.delete=function(t){return this._size=void 0,st(this._tree,t)},t.prototype.entries=function(){return new tt(this,"ENTRIES")},t.prototype.forEach=function(t){var e,n;try{for(var r=G(this),o=r.next();!o.done;o=r.next()){var i=Q(o.value,2);t(i[0],i[1],this)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.fuzzyGet=function(t,e){return function(t,e,n){var r=new Map;if(void 0===e)return r;for(var o=e.length+1,i=o+n,a=new Uint8Array(i*o).fill(n+1),s=0;s<o;++s)a[s]=s;for(var u=1;u<i;++u)a[u*o]=u;return nt(t,e,n,r,a,1,o,""),r}(this._tree,t,e)},t.prototype.get=function(t){var e=it(this._tree,t);return void 0!==e?e.get(Z):void 0},t.prototype.has=function(t){var e=it(this._tree,t);return void 0!==e&&e.has(Z)},t.prototype.keys=function(){return new tt(this,Y)},t.prototype.set=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");return this._size=void 0,at(this._tree,t).set(Z,e),this},Object.defineProperty(t.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var t=this.entries();!t.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),t.prototype.update=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");this._size=void 0;var n=at(this._tree,t);return n.set(Z,e(n.get(Z))),this},t.prototype.fetch=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");this._size=void 0;var n=at(this._tree,t),r=n.get(Z);return void 0===r&&n.set(Z,r=e()),r},t.prototype.values=function(){return new tt(this,X)},t.prototype[Symbol.iterator]=function(){return this.entries()},t.from=function(e){var n,r,o=new t;try{for(var i=G(e),a=i.next();!a.done;a=i.next()){var s=Q(a.value,2),u=s[0],c=s[1];o.set(u,c)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},t.fromObject=function(e){return t.from(Object.entries(e))},t}(),ot=function(t,e,n){var r,o;if(void 0===n&&(n=[]),0===e.length||null==t)return[t,n];try{for(var i=G(t.keys()),a=i.next();!a.done;a=i.next()){var s=a.value;if(s!==Z&&e.startsWith(s))return n.push([t,s]),ot(t.get(s),e.slice(s.length),n)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return n.push([t,e]),ot(void 0,"",n)},it=function(t,e){var n,r;if(0===e.length||null==t)return t;try{for(var o=G(t.keys()),i=o.next();!i.done;i=o.next()){var a=i.value;if(a!==Z&&e.startsWith(a))return it(t.get(a),e.slice(a.length))}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},at=function(t,e){var n,r,o=e.length;t:for(var i=0;t&&i<o;){try{for(var a=(n=void 0,G(t.keys())),s=a.next();!s.done;s=a.next()){var u=s.value;if(u!==Z&&e[i]===u[0]){for(var c=Math.min(o-i,u.length),l=1;l<c&&e[i+l]===u[l];)++l;var d=t.get(u);if(l===u.length)t=d;else{var h=new Map;h.set(u.slice(l),d),t.set(e.slice(i,i+l),h),t.delete(u),t=h}i+=l;continue t}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}var f=new Map;return t.set(e.slice(i),f),f}return t},st=function(t,e){var n=Q(ot(t,e),2),r=n[0],o=n[1];if(void 0!==r)if(r.delete(Z),0===r.size)ut(o);else if(1===r.size){var i=Q(r.entries().next().value,2),a=i[0],s=i[1];ct(o,a,s)}},ut=function(t){if(0!==t.length){var e=Q(lt(t),2),n=e[0],r=e[1];if(n.delete(r),0===n.size)ut(t.slice(0,-1));else if(1===n.size){var o=Q(n.entries().next().value,2),i=o[0],a=o[1];i!==Z&&ct(t.slice(0,-1),i,a)}}},ct=function(t,e,n){if(0!==t.length){var r=Q(lt(t),2),o=r[0],i=r[1];o.set(i+e,n),o.delete(i)}},lt=function(t){return t[t.length-1]},dt="or",ht=function(){function t(t){if(null==(null==t?void 0:t.fields))throw new Error('MiniSearch: option "fields" must be provided');var e=null==t.autoVacuum||!0===t.autoVacuum?xt:t.autoVacuum;this._options=U(U(U({},yt),t),{autoVacuum:e,searchOptions:U(U({},mt),t.searchOptions||{}),autoSuggestOptions:U(U({},gt),t.autoSuggestOptions||{})}),this._index=new rt,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=bt,this.addFields(this._options.fields)}return t.prototype.add=function(t){var e,n,r,o,i,a,s=this._options,u=s.extractField,c=s.tokenize,l=s.processTerm,d=s.fields,h=s.idField,f=u(t,h);if(null==f)throw new Error('MiniSearch: document does not have ID field "'.concat(h,'"'));if(this._idToShortId.has(f))throw new Error("MiniSearch: duplicate ID ".concat(f));var p=this.addDocumentId(f);this.saveStoredFields(p,t);try{for(var v=G(d),_=v.next();!_.done;_=v.next()){var y=_.value,m=u(t,y);if(null!=m){var g=c(m.toString(),y),w=this._fieldIds[y],b=new Set(g).size;this.addFieldLength(p,w,this._documentCount-1,b);try{for(var x=(r=void 0,G(g)),F=x.next();!F.done;F=x.next()){var k=l(F.value,y);if(Array.isArray(k))try{for(var C=(i=void 0,G(k)),E=C.next();!E.done;E=C.next()){var L=E.value;this.addTerm(w,p,L)}}catch(t){i={error:t}}finally{try{E&&!E.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}else k&&this.addTerm(w,p,k)}}catch(t){r={error:t}}finally{try{F&&!F.done&&(o=x.return)&&o.call(x)}finally{if(r)throw r.error}}}}}catch(t){e={error:t}}finally{try{_&&!_.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}},t.prototype.addAll=function(t){var e,n;try{for(var r=G(t),o=r.next();!o.done;o=r.next()){var i=o.value;this.add(i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.addAllAsync=function(t,e){var n=this;void 0===e&&(e={});var r=e.chunkSize,o=void 0===r?10:r,i={chunk:[],promise:Promise.resolve()},a=t.reduce((function(t,e,r){var i=t.chunk,a=t.promise;return i.push(e),(r+1)%o==0?{chunk:[],promise:a.then((function(){return new Promise((function(t){return setTimeout(t,0)}))})).then((function(){return n.addAll(i)}))}:{chunk:i,promise:a}}),i),s=a.chunk;return a.promise.then((function(){return n.addAll(s)}))},t.prototype.remove=function(t){var e,n,r,o,i,a,s=this._options,u=s.tokenize,c=s.processTerm,l=s.extractField,d=s.fields,h=s.idField,f=l(t,h);if(null==f)throw new Error('MiniSearch: document does not have ID field "'.concat(h,'"'));var p=this._idToShortId.get(f);if(null==p)throw new Error("MiniSearch: cannot remove document with ID ".concat(f,": it is not in the index"));try{for(var v=G(d),_=v.next();!_.done;_=v.next()){var y=_.value,m=l(t,y);if(null!=m){var g=u(m.toString(),y),w=this._fieldIds[y],b=new Set(g).size;this.removeFieldLength(p,w,this._documentCount,b);try{for(var x=(r=void 0,G(g)),F=x.next();!F.done;F=x.next()){var k=c(F.value,y);if(Array.isArray(k))try{for(var C=(i=void 0,G(k)),E=C.next();!E.done;E=C.next()){var L=E.value;this.removeTerm(w,p,L)}}catch(t){i={error:t}}finally{try{E&&!E.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}else k&&this.removeTerm(w,p,k)}}catch(t){r={error:t}}finally{try{F&&!F.done&&(o=x.return)&&o.call(x)}finally{if(r)throw r.error}}}}}catch(t){e={error:t}}finally{try{_&&!_.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(f),this._fieldLength.delete(p),this._documentCount-=1},t.prototype.removeAll=function(t){var e,n;if(t)try{for(var r=G(t),o=r.next();!o.done;o=r.next()){var i=o.value;this.remove(i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new rt,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},t.prototype.discard=function(t){var e=this,n=this._idToShortId.get(t);if(null==n)throw new Error("MiniSearch: cannot discard document with ID ".concat(t,": it is not in the index"));this._idToShortId.delete(t),this._documentIds.delete(n),this._storedFields.delete(n),(this._fieldLength.get(n)||[]).forEach((function(t,r){e.removeFieldLength(n,r,e._documentCount,t)})),this._fieldLength.delete(n),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()},t.prototype.maybeAutoVacuum=function(){if(!1!==this._options.autoVacuum){var t=this._options.autoVacuum,e=t.minDirtFactor,n=t.minDirtCount,r=t.batchSize,o=t.batchWait;this.conditionalVacuum({batchSize:r,batchWait:o},{minDirtCount:n,minDirtFactor:e})}},t.prototype.discardAll=function(t){var e,n,r=this._options.autoVacuum;try{this._options.autoVacuum=!1;try{for(var o=G(t),i=o.next();!i.done;i=o.next()){var a=i.value;this.discard(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}finally{this._options.autoVacuum=r}this.maybeAutoVacuum()},t.prototype.replace=function(t){var e=this._options,n=e.idField,r=(0,e.extractField)(t,n);this.discard(r),this.add(t)},t.prototype.vacuum=function(t){return void 0===t&&(t={}),this.conditionalVacuum(t)},t.prototype.conditionalVacuum=function(t,e){var n=this;return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&e,null!=this._enqueuedVacuum||(this._enqueuedVacuum=this._currentVacuum.then((function(){var e=n._enqueuedVacuumConditions;return n._enqueuedVacuumConditions=bt,n.performVacuuming(t,e)}))),this._enqueuedVacuum):!1===this.vacuumConditionsMet(e)?Promise.resolve():(this._currentVacuum=this.performVacuuming(t),this._currentVacuum)},t.prototype.performVacuuming=function(t,e){return n=this,r=void 0,i=function(){var n,r,o,i,a,s,u,c,l,d,h,f,p,v,_,y,m,g,w,b,x,F,k,C,E;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(L){switch(L.label){case 0:if(n=this._dirtCount,!this.vacuumConditionsMet(e))return[3,10];r=t.batchSize||wt.batchSize,o=t.batchWait||wt.batchWait,i=1,L.label=1;case 1:L.trys.push([1,7,8,9]),a=G(this._index),s=a.next(),L.label=2;case 2:if(s.done)return[3,6];u=Q(s.value,2),c=u[0],l=u[1];try{for(F=void 0,d=G(l),h=d.next();!h.done;h=d.next()){f=Q(h.value,2),p=f[0],v=f[1];try{for(C=void 0,_=G(v),y=_.next();!y.done;y=_.next())m=Q(y.value,1),g=m[0],this._documentIds.has(g)||(v.size<=1?l.delete(p):v.delete(g))}catch(t){C={error:t}}finally{try{y&&!y.done&&(E=_.return)&&E.call(_)}finally{if(C)throw C.error}}}}catch(t){F={error:t}}finally{try{h&&!h.done&&(k=d.return)&&k.call(d)}finally{if(F)throw F.error}}return 0===this._index.get(c).size&&this._index.delete(c),i%r!=0?[3,4]:[4,new Promise((function(t){return setTimeout(t,o)}))];case 3:L.sent(),L.label=4;case 4:i+=1,L.label=5;case 5:return s=a.next(),[3,2];case 6:return[3,9];case 7:return w=L.sent(),b={error:w},[3,9];case 8:try{s&&!s.done&&(x=a.return)&&x.call(a)}finally{if(b)throw b.error}return[7];case 9:this._dirtCount-=n,L.label=10;case 10:return[4,null];case 11:return L.sent(),this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null,[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function a(t){try{u(i.next(t))}catch(t){e(t)}}function s(t){try{u(i.throw(t))}catch(t){e(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i},t.prototype.vacuumConditionsMet=function(t){if(null==t)return!0;var e=t.minDirtCount,n=t.minDirtFactor;return e=e||xt.minDirtCount,n=n||xt.minDirtFactor,this.dirtCount>=e&&this.dirtFactor>=n},Object.defineProperty(t.prototype,"isVacuuming",{get:function(){return null!=this._currentVacuum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtCount",{get:function(){return this._dirtCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtFactor",{get:function(){return this._dirtCount/(1+this._documentCount+this._dirtCount)},enumerable:!1,configurable:!0}),t.prototype.has=function(t){return this._idToShortId.has(t)},t.prototype.getStoredFields=function(t){var e=this._idToShortId.get(t);if(null!=e)return this._storedFields.get(e)},t.prototype.search=function(t,e){var n,r;void 0===e&&(e={});var o=this.executeQuery(t,e),i=[];try{for(var a=G(o),s=a.next();!s.done;s=a.next()){var u=Q(s.value,2),c=u[0],l=u[1],d=l.score,h=l.terms,f=l.match,p=h.length,v={id:this._documentIds.get(c),score:d*p,terms:Object.keys(f),match:f};Object.assign(v,this._storedFields.get(c)),(null==e.filter||e.filter(v))&&i.push(v)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i.sort(Ct),i},t.prototype.autoSuggest=function(t,e){var n,r,o,i;void 0===e&&(e={}),e=U(U({},this._options.autoSuggestOptions),e);var a=new Map;try{for(var s=G(this.search(t,e)),u=s.next();!u.done;u=s.next()){var c=u.value,l=c.score,d=(m=c.terms).join(" ");null!=(_=a.get(d))?(_.score+=l,_.count+=1):a.set(d,{score:l,terms:m,count:1})}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}var h=[];try{for(var f=G(a),p=f.next();!p.done;p=f.next()){var v=Q(p.value,2),_=v[0],y=v[1],m=(l=y.score,y.terms),g=y.count;h.push({suggestion:_,terms:m,score:l/g})}}catch(t){o={error:t}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return h.sort(Ct),h},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"termCount",{get:function(){return this._index.size},enumerable:!1,configurable:!0}),t.loadJSON=function(t,e){if(null==e)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(t),e)},t.getDefault=function(t){if(yt.hasOwnProperty(t))return ft(yt,t);throw new Error('MiniSearch: unknown option "'.concat(t,'"'))},t.loadJS=function(e,n){var r,o,i,a,s,u,c=e.index,l=e.documentCount,d=e.nextId,h=e.documentIds,f=e.fieldIds,p=e.fieldLength,v=e.averageFieldLength,_=e.storedFields,y=e.dirtCount,m=e.serializationVersion;if(1!==m&&2!==m)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var g=new t(n);g._documentCount=l,g._nextId=d,g._documentIds=Lt(h),g._idToShortId=new Map,g._fieldIds=f,g._fieldLength=Lt(p),g._avgFieldLength=v,g._storedFields=Lt(_),g._dirtCount=y||0,g._index=new rt;try{for(var w=G(g._documentIds),b=w.next();!b.done;b=w.next()){var x=Q(b.value,2),F=x[0],k=x[1];g._idToShortId.set(k,F)}}catch(t){r={error:t}}finally{try{b&&!b.done&&(o=w.return)&&o.call(w)}finally{if(r)throw r.error}}try{for(var C=G(c),E=C.next();!E.done;E=C.next()){var L=Q(E.value,2),A=L[0],S=L[1],O=new Map;try{for(var z=(s=void 0,G(Object.keys(S))),D=z.next();!D.done;D=z.next()){var I=D.value,T=S[I];1===m&&(T=T.ds),O.set(parseInt(I,10),Lt(T))}}catch(t){s={error:t}}finally{try{D&&!D.done&&(u=z.return)&&u.call(z)}finally{if(s)throw s.error}}g._index.set(A,O)}}catch(t){i={error:t}}finally{try{E&&!E.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}return g},t.prototype.executeQuery=function(t,e){var n=this;if(void 0===e&&(e={}),"string"!=typeof t){var r=U(U(U({},e),t),{queries:void 0}),o=t.queries.map((function(t){return n.executeQuery(t,r)}));return this.combineResults(o,r.combineWith)}var i=this._options,a=i.tokenize,s=i.processTerm,u=i.searchOptions,c=U(U({tokenize:a,processTerm:s},u),e),l=c.tokenize,d=c.processTerm,h=l(t).flatMap((function(t){return d(t)})).filter((function(t){return!!t})).map(_t(c)).map((function(t){return n.executeQuerySpec(t,c)}));return this.combineResults(h,c.combineWith)},t.prototype.executeQuerySpec=function(t,e){var n,r,o,i,a,s,u=U(U({},this._options.searchOptions),e),c=(u.fields||this._options.fields).reduce((function(t,e){var n;return U(U({},t),((n={})[e]=ft(u.boost,e)||1,n))}),{}),l=u.boostDocument,d=u.weights,h=u.maxFuzzy,f=u.bm25,p=U(U({},mt.weights),d),v=p.fuzzy,_=p.prefix,y=this._index.get(t.term),m=this.termResults(t.term,t.term,1,y,c,l,f);if(t.prefix&&(a=this._index.atPrefix(t.term)),t.fuzzy){var g=!0===t.fuzzy?.2:t.fuzzy,w=g<1?Math.min(h,Math.round(t.term.length*g)):g;w&&(s=this._index.fuzzyGet(t.term,w))}if(a)try{for(var b=G(a),x=b.next();!x.done;x=b.next()){var F=Q(x.value,2),k=F[0],C=F[1];if(S=k.length-t.term.length){null==s||s.delete(k);var E=_*k.length/(k.length+.3*S);this.termResults(t.term,k,E,C,c,l,f,m)}}}catch(t){n={error:t}}finally{try{x&&!x.done&&(r=b.return)&&r.call(b)}finally{if(n)throw n.error}}if(s)try{for(var L=G(s.keys()),A=L.next();!A.done;A=L.next()){k=A.value;var S,O=Q(s.get(k),2),z=O[0];(S=O[1])&&(E=v*k.length/(k.length+S),this.termResults(t.term,k,E,z,c,l,f,m))}}catch(t){o={error:t}}finally{try{A&&!A.done&&(i=L.return)&&i.call(L)}finally{if(o)throw o.error}}return m},t.prototype.combineResults=function(t,e){if(void 0===e&&(e=dt),0===t.length)return new Map;var n=e.toLowerCase();return t.reduce(pt[n])||new Map},t.prototype.toJSON=function(){var t,e,n,r,o=[];try{for(var i=G(this._index),a=i.next();!a.done;a=i.next()){var s=Q(a.value,2),u=s[0],c=s[1],l={};try{for(var d=(n=void 0,G(c)),h=d.next();!h.done;h=d.next()){var f=Q(h.value,2),p=f[0],v=f[1];l[p]=Object.fromEntries(v)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}o.push([u,l])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:o,serializationVersion:2}},t.prototype.termResults=function(t,e,n,r,o,i,a,s){var u,c,l,d,h;if(void 0===s&&(s=new Map),null==r)return s;try{for(var f=G(Object.keys(o)),p=f.next();!p.done;p=f.next()){var v=p.value,_=o[v],y=this._fieldIds[v],m=r.get(y);if(null!=m){var g=m.size,w=this._avgFieldLength[y];try{for(var b=(l=void 0,G(m.keys())),x=b.next();!x.done;x=b.next()){var F=x.value;if(this._documentIds.has(F)){var k=i?i(this._documentIds.get(F),e,this._storedFields.get(F)):1;if(k){var C=m.get(F),E=this._fieldLength.get(F)[y],L=n*_*k*vt(C,g,this._documentCount,E,w,a),A=s.get(F);if(A){A.score+=L,Ft(A.terms,t);var S=ft(A.match,e);S?S.push(v):A.match[e]=[v]}else s.set(F,{score:L,terms:[t],match:(h={},h[e]=[v],h)})}}else this.removeTerm(y,F,e),g-=1}}catch(t){l={error:t}}finally{try{x&&!x.done&&(d=b.return)&&d.call(b)}finally{if(l)throw l.error}}}}}catch(t){u={error:t}}finally{try{p&&!p.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}return s},t.prototype.addTerm=function(t,e,n){var r=this._index.fetch(n,Et),o=r.get(t);if(null==o)(o=new Map).set(e,1),r.set(t,o);else{var i=o.get(e);o.set(e,(i||0)+1)}},t.prototype.removeTerm=function(t,e,n){if(this._index.has(n)){var r=this._index.fetch(n,Et),o=r.get(t);null==o||null==o.get(e)?this.warnDocumentChanged(e,t,n):o.get(e)<=1?o.size<=1?r.delete(t):o.delete(e):o.set(e,o.get(e)-1),0===this._index.get(n).size&&this._index.delete(n)}else this.warnDocumentChanged(e,t,n)},t.prototype.warnDocumentChanged=function(t,e,n){var r,o;try{for(var i=G(Object.keys(this._fieldIds)),a=i.next();!a.done;a=i.next()){var s=a.value;if(this._fieldIds[s]===e)return void this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(t),' has changed before removal: term "').concat(n,'" was not present in field "').concat(s,'". Removing a document after it has changed can corrupt the index!'),"version_conflict")}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},t.prototype.addDocumentId=function(t){var e=this._nextId;return this._idToShortId.set(t,e),this._documentIds.set(e,t),this._documentCount+=1,this._nextId+=1,e},t.prototype.addFields=function(t){for(var e=0;e<t.length;e++)this._fieldIds[t[e]]=e},t.prototype.addFieldLength=function(t,e,n,r){var o=this._fieldLength.get(t);null==o&&this._fieldLength.set(t,o=[]),o[e]=r;var i=(this._avgFieldLength[e]||0)*n+r;this._avgFieldLength[e]=i/(n+1)},t.prototype.removeFieldLength=function(t,e,n,r){if(1!==n){var o=this._avgFieldLength[e]*n-r;this._avgFieldLength[e]=o/(n-1)}else this._avgFieldLength[e]=0},t.prototype.saveStoredFields=function(t,e){var n,r,o=this._options,i=o.storeFields,a=o.extractField;if(null!=i&&0!==i.length){var s=this._storedFields.get(t);null==s&&this._storedFields.set(t,s={});try{for(var u=G(i),c=u.next();!c.done;c=u.next()){var l=c.value,d=a(e,l);void 0!==d&&(s[l]=d)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t}(),ft=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},pt=((K={})[dt]=function(t,e){var n,r;try{for(var o=G(e.keys()),i=o.next();!i.done;i=o.next()){var a=i.value,s=t.get(a);if(null==s)t.set(a,e.get(a));else{var u=e.get(a),c=u.score,l=u.terms,d=u.match;s.score=s.score+c,s.match=Object.assign(s.match,d),kt(s.terms,l)}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return t},K.and=function(t,e){var n,r,o=new Map;try{for(var i=G(e.keys()),a=i.next();!a.done;a=i.next()){var s=a.value,u=t.get(s);if(null!=u){var c=e.get(s),l=c.score,d=c.terms,h=c.match;kt(u.terms,d),o.set(s,{score:u.score+l,terms:u.terms,match:Object.assign(u.match,h)})}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},K.and_not=function(t,e){var n,r;try{for(var o=G(e.keys()),i=o.next();!i.done;i=o.next()){var a=i.value;t.delete(a)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return t},K),vt=function(t,e,n,r,o,i){var a=i.k,s=i.b,u=i.d;return Math.log(1+(n-e+.5)/(e+.5))*(u+t*(a+1)/(t+a*(1-s+s*r/o)))},_t=function(t){return function(e,n,r){return{term:e,fuzzy:"function"==typeof t.fuzzy?t.fuzzy(e,n,r):t.fuzzy||!1,prefix:"function"==typeof t.prefix?t.prefix(e,n,r):!0===t.prefix}}},yt={idField:"id",extractField:function(t,e){return t[e]},tokenize:function(t,e){return t.split(At)},processTerm:function(t,e){return t.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[],logger:function(t,e,n){return null!=console&&null!=console.warn&&console[t](e)},autoVacuum:!0},mt={combineWith:dt,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:{k:1.2,b:.7,d:.5}},gt={combineWith:"and",prefix:function(t,e,n){return e===n.length-1}},wt={batchSize:1e3,batchWait:10},bt={minDirtFactor:.1,minDirtCount:20},xt=U(U({},wt),bt),Ft=function(t,e){t.includes(e)||t.push(e)},kt=function(t,e){var n,r;try{for(var o=G(e),i=o.next();!i.done;i=o.next()){var a=i.value;t.includes(a)||t.push(a)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},Ct=function(t,e){var n=t.score;return e.score-n},Et=function(){return new Map},Lt=function(t){var e,n,r=new Map;try{for(var o=G(Object.keys(t)),i=o.next();!i.done;i=o.next()){var a=i.value;r.set(parseInt(a,10),t[a])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},At=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;const St=["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],Ot=new Date,zt=b("input.transaction__input.autocomplete-example-container"),Dt=b("input.transaction__input");function It(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overview";const n=b("button.btn.back-btn.info-btn","Вернуться назад");n.addEventListener("click",(()=>{"overview"===e?jt.navigate("/accounts"):jt.navigate(`/accounts/${t.account}`)}));const r=b("h2.title","Просмотр счёта");"history"===e&&(r.textContent="История баланса");const o=b(".transaction__suggestion"),i=b(".transaction__error"),a=b("form.info__transaction",[b("h3.subtitle","Новый перевод"),b(".transaction__descr","Номер счета получателя"),b(".transaction__wrapper",[zt,o]),b(".transaction__descr","Сумма перевода"),b(".transaction__wrapper",Dt),b("button.btn.transaction__btn","Отправить"),i]);let s=JSON.parse(localStorage.getItem("transactionHistory"));null===s&&(s=[]);let u=[];s.forEach((t=>{u.push({id:u.length,account:t})}));let c=new ht({fields:["account"],storeFields:["account"]});c.addAll(u),zt.addEventListener("keyup",(()=>{o.innerHTML="",o.classList.remove("transaction__suggestion--active"),c.autoSuggest(zt.value.trim()).forEach((t=>{const e=b(".suggestion__line",t.suggestion);e.addEventListener("click",(()=>{zt.value=e.textContent,o.innerHTML="",o.classList.remove("transaction__suggestion--active")})),o.append(e),o.classList.add("transaction__suggestion--active")}))})),a.addEventListener("submit",(e=>{e.preventDefault(),""===zt.value.trim()||""===Dt.value.trim()?i.textContent="Нужно заполнить все поля":(s.includes(zt.value.trim())||(s.push(zt.value.trim()),localStorage.setItem("transactionHistory",JSON.stringify(s))),i.textContent="",jt.navigate(`accounts/${t.account}/transfer`))}));const l=b(".info__history",[b("h3.subtitle","История баланса"),b(".history__table",[b(".table__head",[b(".table__cell","Отправитель"),b(".table__cell","Получатель"),b(".table__cell","Сумма"),b(".table__cell","Дата")])])]);let d=0;d="overview"===e?11:26;for(let e=1;e<d&&!(t.transactions.length-e<0);e++){let n;n=t.transactions[t.transactions.length-e].from===t.account?b(".table__cell.table__cell--negative",`- ${t.transactions[t.transactions.length-e].amount} ₽`):b(".table__cell.table__cell--positive",`+ ${t.transactions[t.transactions.length-e].amount} ₽`),l.append(b(".table__row",[b(".table__cell",t.transactions[t.transactions.length-e].from),b(".table__cell",t.transactions[t.transactions.length-e].to),n,b(".table__cell",`${t.transactions[t.transactions.length-e].date.split("T")[0].split("-")[2]}.${t.transactions[t.transactions.length-e].date.split("T")[0].split("-")[1]}.${t.transactions[t.transactions.length-e].date.split("T")[0].split("-")[0]}`)]))}let h=6;"history"===e&&(h=12);const f=function(t){let e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;6===o?(e=[0,0,0,0,0,0],n=[0,0,0,0,0,0],r=[0,0,0,0,0,0]):(e=[0,0,0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0,0,0,0,0,0,0,0,0]);let i=[],a=Ot.getMonth()+1;for(let e=0;e<t.transactions.length;e++)i.push({month:t.transactions[e].date.split("T")[0].split("-")[1],amount:t.transactions[e].from===t.account?-1*t.transactions[e].amount:t.transactions[e].amount});let s=t.balance;e[0]=s;for(let t=0;t<o-1;t++){const o=a-t;i.forEach((e=>{parseInt(e.month)===o&&(s-=e.amount,e.amount>0?n[t]+=e.amount:r[t]-=e.amount)})),e[t+1]=s,e[t+1]=Math.floor(100*e[t+1])/100}const u=Math.max(...e),c=Math.max(...r),l=b(".dynamics__graph",[b(".dynamics__max",`${u}`),b(".dynamics__min",0)]),d=b(".dynamics__graph",[b(".dynamics__max",`${u}`),b(".dynamics__ratio",`${c}`),b(".dynamics__min",0)]);for(let t=o-1;t>=0;t--){if(100*e[t]/u<1)continue;let o=a-(t+1);a-t+1<0&&(o=a-t+13);const i=b(".dynamics__block",[b(".dynamics__scale",{style:`height: ${100*e[t]/u}%`}),b(".dynamics__month",St[o].substring(0,3))]);l.append(i);const s=Math.floor(r[t]/(n[t]+r[t])*100),c=b(".dynamics__block",[b(".dynamics__scale",{style:`height: ${100*e[t]/u}%`},[b(".dynamics__income",{style:`height: ${100-s}%`}),b(".dynamics__outcome",{style:`height: ${s}%`})]),b(".dynamics__month",St[o].substring(0,3))]);d.append(c)}let h;return h=6===o?b(".info__dynamics",[b("h3.subtitle","Динамика баланса"),l]):b(".info__wrapper",[b(".info__dynamics .info__dynamics--history",[b("h3.subtitle","Динамика баланса"),l]),b(".info__dynamics .info__dynamics--history",[b("h3.subtitle","Соотношение входящих исходящих транзакций"),d])]),h}(t,h);let p;return f.addEventListener("click",(()=>{jt.navigate(`/accounts/${t.account}/history`)})),l.addEventListener("click",(()=>{jt.navigate(`/accounts/${t.account}/history`)})),p="overview"===e?b(".info__main",[a,f]):b("div",[f]),b(".container",b(".info",[b(".info__top",[b(".info__left",[r,b("span.info__account-number",`№ ${t.account}`)]),b(".info__right",[n,b("span.info__balance","Баланс"),b("span.info__balance--value",`${t.balance} ₽`)])]),p,l]))}var Tt={load:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//api-maps.yandex.ru/2.1/?lang=en_RU";return this.promise||(this.promise=new Promise((function(e,n){var r=document.createElement("script");r.onload=e,r.onerror=n,r.type="text/javascript",r.src=t,document.body.appendChild(r)})).then((function(){var e,n=null===(e=t.match(/[\\?&]ns=([^&#]*)/))?"":decodeURIComponent(e[1].replace(/\+/g," "));return n&&"ymaps"!==n&&(0,eval)("var ymaps = ".concat(n,";")),new Promise((function(t){return ymaps.ready(t)}))}))),this.promise}};const Mt=Tt,jt=new(S())("/");let Pt=0;const Vt=b("main.main"),$t=b(".message__message",""),Nt=b("button.btn","Понятно"),Bt=b(".message",[b(".message__wrapper",[$t,Nt])]);function Rt(t){Vt.innerHTML="",x(Vt,t)}function Ht(){const t=JSON.parse(localStorage.getItem("token"));return t?Math.floor(new Date-new Date(t.date))/6e4<30?t.token:(localStorage.removeItem("token"),0):0}Nt.addEventListener("click",(()=>{Bt.classList.remove("message--active"),window.document.body.classList.remove("body--stop-scroll")})),x(window.document.body,[T,Bt,Vt]),N.addEventListener("submit",(async t=>{if(t.preventDefault(),M.value.trim().length>=6&&P.value.trim().length>=6){const t=await async function(t,e){return await fetch("http://localhost:3000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:t,password:e})}).then((t=>t.json()))}(M.value,P.value);if(t.payload){Pt=t.payload.token;const e=new Date;localStorage.setItem("token",JSON.stringify({token:Pt,date:e})),jt.navigate("/accounts"),M.value="",j.classList.remove("error__show"),V.classList.remove("error__show"),$.textContent=""}else"No such user"===t.error?(M.value="",j.classList.add("error__show")):(P.value="",V.classList.add("error__show"))}else $.textContent="Некорректный логин/пароль";P.value=""})),z.addEventListener("click",(()=>{jt.navigate("/accounts")})),D.addEventListener("click",(()=>{jt.navigate("currency")})),O.addEventListener("click",(()=>{jt.navigate("map")})),I.addEventListener("click",(()=>{localStorage.removeItem("token"),jt.navigate("/")})),q.addEventListener("click",(async()=>{const t=await async function(t){return await fetch("http://localhost:3000/create-account",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${t}`}}).then((t=>t.json()))}(Pt);Bt.classList.add("message--active"),window.document.body.classList.add("body--stop-scroll"),""===t.error?($t.textContent=`Счет ${t.payload.account} успешно создан`,Rt(J(await B(Pt).then((t=>t.payload))))):$t.textContent="При создании счета произошла ошибка :("})),jt.on("/",(()=>{Pt=0,Rt(b(".container",N))})),jt.on("map",(async()=>{const t=await async function(){return await fetch("http://localhost:3000/banks").then((t=>t.json()))}().then((t=>t.payload));Vt.innerHTML="",x(Vt,await async function(t){const e=b(".map-wrapper"),n=b(".container",b(".map",[[b("h2.section__title","Карта банкоматов"),e]]));return Mt.load().then((n=>{const r=new n.Map(e,{center:[55.753544,37.621202],zoom:12});t.forEach((t=>{const e=new n.GeoObject({geometry:{type:"Point",coordinates:[t.lat,t.lon]}});r.geoObjects.add(e)}))})).catch((t=>console.log("Failed to load Yandex Maps",t))),n}(t))})),jt.on("currency",(async()=>{if(Pt=Ht(),0===Pt)jt.navigate("/");else{const t=await async function(){return await fetch("http://localhost:3000/all-currencies",{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>t.json()))}(),e=await async function(t){return await fetch("http://localhost:3000/currencies",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Basic ${t}`}}).then((t=>t.json()))}(Pt).then((t=>t.payload));Rt(function(t,e){const n=b("ul.currency__list");let r=[],o=[];const i=b("ul.dropdown__currency-list"),a=b("ul.dropdown__currency-list"),s=b(".exchange__dropdown","BTC"),u=b(".exchange__dropdown","USD");t.payload.forEach((t=>{o.push(b("li.dropdown__currency-item",`${t}`))}));for(let t in e){if(0===e[t].amount)continue;const o=b("li.currency__item",[b(".currency__code",e[t].code),b(".currency__border"),b(".currency__amount",e[t].amount)]);n.append(o),r.push(b("li.dropdown__currency-item",`${e[t].code}`))}let c,l;r.forEach((t=>{"BTC"===t.textContent&&(c=t,t.classList.add("dropdown__currency-item--checked")),i.append(t),t.addEventListener("click",(()=>{c.classList.remove("dropdown__currency-item--checked"),c=t,t.classList.add("dropdown__currency-item--checked"),i.classList.remove("dropdown__currency-list--active"),s.textContent=t.textContent}))})),o.forEach((t=>{"USD"===t.textContent&&(l=t,t.classList.add("dropdown__currency-item--checked")),a.append(t),t.addEventListener("click",(()=>{l.classList.remove("dropdown__currency-item--checked"),l=t,t.classList.add("dropdown__currency-item--checked"),a.classList.remove("dropdown__currency-list--active"),u.textContent=t.textContent}))})),s.addEventListener("click",(()=>{i.classList.toggle("dropdown__currency-list--active")})),u.addEventListener("click",(()=>{a.classList.toggle("dropdown__currency-list--active")}));const d=b(".exchange__error"),h=b("input.exchange__amount-input",{type:"number"}),f=b("form.exchange__form",[b(".exchange__left",[b(".exchange__currency",[b("span.exchange__descr","Из"),b(".exchange__dropdown-wrapper",[i,s]),b("span.exchange__descr","в"),b(".exchange__dropdown-wrapper",[a,u])]),b(".exchange__amount",[b("span.exchange__descr","Сумма"),h])]),b("button.btn","Отправить"),d]);return f.addEventListener("submit",(t=>{t.preventDefault(),d.textContent="",s.textContent===u.textContent?(d.classList.add("exchange__error--active"),d.textContent="Неккоректная валюта перевода"):parseInt(h.value)<=0||""===h.value?(d.classList.add("exchange__error--active"),d.textContent="Некорректная сумма"):jt.navigate(`/currency/${s.textContent}/${u.textContent}/${parseInt(h.value)}`)})),b(".container",b(".currency",[b("h2.sections__title","Валютный обменм"),b(".currency__wrapper",[b(".currency__operations",[b(".currency__exchange",[b("h3.currency__subtitle","Ваши валюты"),n]),b(".currency__exchange",[b("h3.currency__subtitle","Обмен валют"),f])]),b(".currency__rates",[b("h3.currency__subtitle","Изменение курса валют в реальном времени"),W])])]))}(t,e))}})),jt.on("/currency/:from/:to/:amount",(async t=>{let{data:{from:e,to:n,amount:r}}=t;const o=await async function(t,e,n,r){return await fetch("http://localhost:3000/currency-buy",{method:"POST",body:JSON.stringify({from:t,to:e,amount:n}),headers:{"Content-Type":"application/json",authorization:`Basic ${r}`}}).then((t=>t.json()))}(e,n,r,Pt).then();Bt.classList.add("message--active"),window.document.body.classList.add("body--stop-scroll"),""===o.error?$t.textContent="Обмен валют прошел успешно":$t.textContent="При обмене валют произошла ошибка",jt.navigate("/currency")})),jt.on("/accounts",(async()=>{Pt=Ht(),0===Pt?jt.navigate("/"):Rt(J(await B(Pt).then((t=>t.payload))))})),jt.on("/accounts/sort/:field",(t=>{let{data:{field:e}}=t;Pt=Ht(),0===Pt?jt.navigate("/"):async function(t){const e=await B(Pt).then((t=>t.payload));"lastTransaction"===t&&e.forEach((t=>{t.transactions.length?t.lastTransaction=t.transactions[0].date:t.lastTransaction="-"})),Rt(J(function(t,e){return t.sort(((t,n)=>{if(t[e]>n[e])return-1}))}(e,t),t))}(e)})),jt.on("/accounts/:id",(async t=>{let{data:{id:e}}=t;Pt=Ht(),0===Pt?jt.navigate("/"):Rt(It(await R(e,Pt).then((t=>t.payload))))})),jt.on("/accounts/:id/history",(async t=>{let{data:{id:e}}=t;Pt=Ht(),0===Pt?jt.navigate("/"):Rt(It(await R(e,Pt).then((t=>t.payload)),"history"))})),jt.on("/accounts/:id/transfer",(async t=>{let{data:{id:e}}=t;const n=await async function(t,e,n,r){return await fetch("http://localhost:3000/transfer-funds",{method:"POST",body:JSON.stringify({from:t,to:e,amount:n}),headers:{"Content-Type":"application/json",authorization:`Basic ${r}`}}).then((t=>t.json()))}(e,zt.value,Dt.value,Pt);Bt.classList.add("message--active"),window.document.body.classList.add("body--stop-scroll"),""===n.error?$t.textContent="Перевод средств прошел успешно":$t.textContent="Ошибка при переводе средств",zt.value="",Dt.value="",jt.navigate(`/accounts/${e}`)})),jt.resolve()})()})();